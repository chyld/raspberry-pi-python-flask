from flask import Flask, jsonify
from gpiozero import LED, InputDevice

app = Flask(__name__)
led = LED(17)
lux = InputDevice(21)

# ---------------------------------------------------------------------------- #
# ---------------------------------------------------------------------------- #
# ---------------------------------------------------------------------------- #

@app.route("/light/<string:state>")
def light(state):
    if(state == 'on'):
        led.on()
    else:
        led.off()

    return jsonify(payload='success')

# ---------------------------------------------------------------------------- #
# ---------------------------------------------------------------------------- #
# ---------------------------------------------------------------------------- #

@app.route("/sensor/light")
def temperature():
    print('lux {0}, value {1}'.format(lux, lux.values))
    return jsonify(payload='success')

# ---------------------------------------------------------------------------- #
# ---------------------------------------------------------------------------- #
# ---------------------------------------------------------------------------- #

if __name__ == "__main__":
    app.run(host='0.0.0.0', debug=True)

